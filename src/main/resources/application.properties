# ???????? ?????????
spring.application.name=frontend-service
server.port=8082

# Eureka Client ?????????
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true

# DEBUG CONFIGURATION
app.debug.headers.enabled=true

# JWT
jwt.secret=${JWT_SECRET:myFoodDeliverySecretKey2024ThisKeyMustBeLongEnoughForSecurity}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Mapbox
mapbox.access.token=${MAPBOX_ACCESS_TOKEN}
mapbox.geocoding.limit=${MAPBOX_GEOCODING_LIMIT:1}
mapbox.geocoding.types=${MAPBOX_GEOCODING_TYPES:address,poi}
mapbox.geocoding.country=${MAPBOX_GEOCODING_COUNTRY:RU}

# ??????????? ???????
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=3600
spring.mvc.static-path-pattern=/**

# Actuator endpoints
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# CORS ?????????
spring.web.cors.allowed-origins=http://localhost:8081,http://localhost:8080
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# ???????????
logging.level.com.example.foodfrontendservice=DEBUG
logging.level.org.springframework.web=INFO
logging.level.feign=DEBUG

# URL ?????? ????????
app.services.user-service.url=http://localhost:8081
app.services.api-gateway.url=http://localhost:8080

# ????????? ??? ??????????
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ? ????????: Multipart configuration ??? UI Service
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=15MB
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.location=${java.io.tmpdir}
spring.servlet.multipart.resolve-lazily=false

# ? ????????: Feign Configuration
feign.client.config.default.connectTimeout=10000
feign.client.config.default.readTimeout=30000
feign.client.config.default.loggerLevel=BASIC

# ? ??????????? ????????? ??? product-service
feign.client.config.product-service.connectTimeout=15000
feign.client.config.product-service.readTimeout=60000
feign.client.config.product-service.loggerLevel=FULL

# ? ????????? ??? user-service
feign.client.config.user-service.connectTimeout=3000
feign.client.config.user-service.readTimeout=3000
feign.client.config.user-service.loggerLevel=FULL

# ? Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.product-service.register-health-indicator=true
resilience4j.circuitbreaker.instances.product-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.product-service.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.product-service.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.product-service.wait-duration-in-open-state=30s

resilience4j.circuitbreaker.instances.user-service.register-health-indicator=true
resilience4j.circuitbreaker.instances.user-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.user-service.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.user-service.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.user-service.wait-duration-in-open-state=30s

# ? Retry Configuration
resilience4j.retry.instances.product-service.max-attempts=3
resilience4j.retry.instances.product-service.wait-duration=1000ms

resilience4j.retry.instances.user-service.max-attempts=3
resilience4j.retry.instances.user-service.wait-duration=500ms

# ? Compression ??? ??????? multipart ????????
feign.compression.request.enabled=true
feign.compression.request.mime-types=text/xml,application/xml,application/json,multipart/form-data
feign.compression.request.min-request-size=2048
feign.compression.response.enabled=true