<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè™ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .auth-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .auth-section h3 {
            color: #495057;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .auth-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .required {
            color: #dc3545;
        }

        input, textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 50px 20px;
            border: 3px dashed #ccc;
            border-radius: 12px;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .file-input-label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-input-label.has-file {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.05);
        }

        .image-preview {
            margin-top: 15px;
            display: none;
        }

        .image-preview img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 150px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .response-section {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }

        .response-success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .response-error {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .response-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .response-content {
            font-family: 'Courier New', monospace;
            background: rgba(0,0,0,0.05);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .loading {
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            backdrop-filter: blur(2px);
        }

        .loading::before {
            content: '‚è≥ –°–æ–∑–¥–∞–µ–º –º–∞–≥–∞–∑–∏–Ω...';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px 30px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            font-weight: 600;
            z-index: 1;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .validation-error {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .form-group.error input,
        .form-group.error textarea,
        .form-group.error select {
            border-color: #dc3545;
        }

        .form-group.error .validation-error {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-group.full-width {
                grid-column: span 1;
            }

            .auth-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üè™ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω</h1>
        <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-section">
        <h3>üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h3>
        <div class="auth-grid">
            <div class="form-group">
                <label for="authToken">Authorization Token:</label>
                <input type="text" id="authToken"
                       value="Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJidXNpbmVzc0BleGFtcGxlLmNvbSIsInVzZXJJZCI6OSwicm9sZSI6IlJPTEVfQlVTSU5FU1MiLCJpYXQiOjE3NTEyNjQyMzUsImV4cCI6MTc1MTM1MDYzNX0.0AuCD7BvZ2isOLuAve-FMyt3rLnDoEHlHYDj-Gq7UmQ"
                       placeholder="Bearer token...">
            </div>
            <div class="form-group">
                <label for="userId">User ID:</label>
                <input type="number" id="userId" value="9" placeholder="User ID">
            </div>
        </div>
    </div>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <form id="createStoreForm" enctype="multipart/form-data">

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="form-section">
            <h3 class="section-title">üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required
                           placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞">
                    <div class="validation-error">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email"
                           placeholder="contact@example.com">
                    <div class="validation-error">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email</div>
                </div>

                <div class="form-group full-width">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="description" name="description"
                              placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ..."></textarea>
                    <div class="validation-error">–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ</div>
                </div>
            </div>
        </div>

        <!-- –ê–¥—Ä–µ—Å -->
        <div class="form-section">
            <h3 class="section-title">üìç –ê–¥—Ä–µ—Å –º–∞–≥–∞–∑–∏–Ω–∞</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="street">–£–ª–∏—Ü–∞ <span class="required">*</span></label>
                    <input type="text" id="street" name="address.street" required
                           placeholder="—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10">
                    <div class="validation-error">–£–ª–∏—Ü–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</div>
                </div>

                <div class="form-group">
                    <label for="city">–ì–æ—Ä–æ–¥ <span class="required">*</span></label>
                    <input type="text" id="city" name="address.city" required
                           placeholder="–ú–æ—Å–∫–≤–∞">
                    <div class="validation-error">–ì–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω</div>
                </div>

                <div class="form-group">
                    <label for="region">–û–±–ª–∞—Å—Ç—å/–®—Ç–∞—Ç/–†–µ–≥–∏–æ–Ω</label>
                    <input type="text" id="region" name="region"
                           placeholder="–•–∞—Ä—å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">
                </div>

                <div class="form-group">
                    <label for="postalCode">–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å</label>
                    <input type="text" id="postalCode" name="postalCode"
                           placeholder="61000" pattern="[0-9]{5,10}">
                    <div class="validation-error">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–Ω–¥–µ–∫—Å–∞</div>
                </div>

                <div class="form-group full-width">
                    <label for="country">–°—Ç—Ä–∞–Ω–∞ <span class="required">*</span></label>
                    <select id="country" name="address.country" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                        <option value="–†–æ—Å—Å–∏—è" selected>–†–æ—Å—Å–∏—è</option>
                        <option value="–ë–µ–ª–∞—Ä—É—Å—å">–ë–µ–ª–∞—Ä—É—Å—å</option>
                        <option value="–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                        <option value="–£–∫—Ä–∞–∏–Ω–∞">–£–∫—Ä–∞–∏–Ω–∞</option>
                        <option value="–°–®–ê">–°–®–ê</option>
                        <option value="–ì–µ—Ä–º–∞–Ω–∏—è">–ì–µ—Ä–º–∞–Ω–∏—è</option>
                    </select>
                    <div class="validation-error">–°—Ç—Ä–∞–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</div>
                </div>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
        <div class="form-section">
            <h3 class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="form-grid">
                <div class="form-group full-width">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="phone" name="phone"
                           placeholder="+7 (999) 123-45-67"
                           pattern="^[+]?[0-9\s\-\(\)]{10,20}$">
                    <div class="validation-error">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
                </div>
            </div>
        </div>

        <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç–∞–≤–∫–∏ -->
        <div class="form-section">
            <h3 class="section-title">üöö –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="deliveryRadius">–†–∞–¥–∏—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫–º) <span class="required">*</span></label>
                    <input type="number" id="deliveryRadius" name="deliveryRadius"
                           min="1" max="50" value="5" required>
                    <div class="validation-error">–û—Ç 1 –¥–æ 50 –∫–º</div>
                </div>

                <div class="form-group">
                    <label for="deliveryFee">–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ ($) <span class="required">*</span></label>
                    <input type="number" id="deliveryFee" name="deliveryFee"
                           min="0" max="99999.99" step="0.01" value="2.99" required>
                    <div class="validation-error">–û—Ç 0 –¥–æ 99999.99</div>
                </div>

                <div class="form-group full-width">
                    <label for="estimatedDeliveryTime">–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ (–º–∏–Ω—É—Ç—ã) <span class="required">*</span></label>
                    <input type="number" id="estimatedDeliveryTime" name="estimatedDeliveryTime"
                           min="10" max="180" value="30" required>
                    <div class="validation-error">–û—Ç 10 –¥–æ 180 –º–∏–Ω—É—Ç</div>
                </div>
            </div>
        </div>

        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
        <div class="form-section">
            <h3 class="section-title">üì∏ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</h3>
            <div class="form-group">
                <label>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –º–∞–≥–∞–∑–∏–Ω–∞</label>
                <div class="file-input-wrapper">
                    <input type="file" id="imageFile" name="imageFile"
                           accept="image/*" class="file-input">
                    <label for="imageFile" class="file-input-label" id="fileLabel">
                        <span>üì∏</span>
                        <span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                    </label>
                </div>
                <div class="image-preview" id="imagePreview">
                    <img id="previewImg" src="" alt="Preview">
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="button-group">
            <button type="button" class="btn btn-secondary" onclick="resetForm()">
                üîÑ –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
            </button>
            <button type="submit" class="btn btn-primary" id="submitBtn">
                üöÄ –°–æ–∑–¥–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω
            </button>
        </div>
    </form>

    <!-- –°–µ–∫—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ -->
    <div class="response-section" id="responseSection">
        <div class="response-title" id="responseTitle"></div>
        <div class="response-content" id="responseContent"></div>
    </div>
</div>

<script>
    const BASE_URL = 'http://localhost:8082/api/frontend/stores';

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    document.getElementById('imageFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        const label = document.getElementById('fileLabel');
        const preview = document.getElementById('imagePreview');
        const previewImg = document.getElementById('previewImg');

        if (file) {
            label.classList.add('has-file');
            label.innerHTML = `<span>‚úÖ</span><span>${file.name}</span>`;

            const reader = new FileReader();
            reader.onload = function(e) {
                previewImg.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        } else {
            label.classList.remove('has-file');
            label.innerHTML = `<span>üì∏</span><span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>`;
            preview.style.display = 'none';
        }
    });

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    function validateForm() {
        const requiredFields = document.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
            const formGroup = field.closest('.form-group');

            if (!field.value.trim()) {
                formGroup.classList.add('error');
                isValid = false;
            } else {
                formGroup.classList.remove('error');
            }
        });

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è email
        const email = document.getElementById('email');
        if (email.value && !email.value.includes('@')) {
            email.closest('.form-group').classList.add('error');
            isValid = false;
        }

        return isValid;
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
    document.getElementById('createStoreForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        if (!validateForm()) {
            showResponse('error', '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ');
            return;
        }

        const container = document.querySelector('.container');
        container.classList.add('loading');

        try {
            const formData = new FormData();

            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
            formData.append('name', document.getElementById('name').value);
            formData.append('description', document.getElementById('description').value || '');
            formData.append('phone', document.getElementById('phone').value || '');
            formData.append('email', document.getElementById('email').value || '');
            formData.append('deliveryRadius', document.getElementById('deliveryRadius').value);
            formData.append('deliveryFee', document.getElementById('deliveryFee').value);
            formData.append('estimatedDeliveryTime', document.getElementById('estimatedDeliveryTime').value);
            formData.append('isActive', 'true');

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –∞–¥—Ä–µ—Å–∞ –Ω–∞–ø—Ä—è–º—É—é (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π)
            formData.append('street', document.getElementById('street').value);
            formData.append('city', document.getElementById('city').value);
            formData.append('region', document.getElementById('region').value || ''); // –ò–ó–ú–ï–ù–ï–ù–û
            formData.append('postalCode', document.getElementById('postalCode').value || ''); // –ò–ó–ú–ï–ù–ï–ù–û
            formData.append('country', document.getElementById('country').value);

            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω
            const imageFile = document.getElementById('imageFile').files[0];
            if (imageFile) {
                formData.append('imageFile', imageFile);
            }

            console.log('üì§ Sending form data with', formData.entries().length, 'parts');

            const response = await fetch(BASE_URL, {
                method: 'POST',
                headers: {
                    'Authorization': document.getElementById('authToken').value,
                    'X-User-Id': document.getElementById('userId').value
                    // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º Content-Type –¥–ª—è multipart!
                },
                body: formData
            });

            const data = await response.json();

            if (response.ok && data.success) {
                showResponse('success', '–ú–∞–≥–∞–∑–∏–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! üéâ', JSON.stringify(data, null, 2));
                resetForm();
            } else {
                showResponse('error', '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞',
                    `–°—Ç–∞—Ç—É—Å: ${response.status}\n–°–æ–æ–±—â–µ–Ω–∏–µ: ${data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}\n\n${JSON.stringify(data, null, 2)}`);
            }

        } catch (error) {
            showResponse('error', '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', error.message);
        } finally {
            container.classList.remove('loading');
        }
    });

    function showResponse(type, title, content) {
        const section = document.getElementById('responseSection');
        const titleEl = document.getElementById('responseTitle');
        const contentEl = document.getElementById('responseContent');

        section.className = `response-section response-${type}`;
        titleEl.innerHTML = type === 'success' ? `‚úÖ ${title}` : `‚ùå ${title}`;
        contentEl.textContent = content;
        section.style.display = 'block';

        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
        section.scrollIntoView({ behavior: 'smooth' });
    }

    function resetForm() {
        document.getElementById('createStoreForm').reset();
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('fileLabel').classList.remove('has-file');
        document.getElementById('fileLabel').innerHTML = `<span>üì∏</span><span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>`;
        document.getElementById('responseSection').style.display = 'none';

        // –£–±–∏—Ä–∞–µ–º –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        document.querySelectorAll('.form-group.error').forEach(group => {
            group.classList.remove('error');
        });
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    document.querySelectorAll('input, textarea, select').forEach(field => {
        field.addEventListener('blur', function() {
            const formGroup = this.closest('.form-group');

            if (this.hasAttribute('required') && !this.value.trim()) {
                formGroup.classList.add('error');
            } else {
                formGroup.classList.remove('error');
            }
        });
    });
</script>
</body>
</html>